
<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="utf-8" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />
     <meta name="viewport" content="width=device-width,initial-scale=1" />
     <title>SNS Student Managment System</title>
 

     <!-- Favicon icon -->
     <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png" />
     <link rel="stylesheet" href="vendor/bootstrap-select/dist/css/bootstrap-select.min.css" />

     <!-- Datatable -->
     <link href="/vendor/datatables/css/jquery.dataTables.min.css" rel="stylesheet" />
     <link rel="stylesheet" href="/css/style.css" />
     
     <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
     <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

</head>

<body>

     <div id="preloader">
          <div class="sk-three-bounce">
               <div class="sk-child sk-bounce1"></div>
               <div class="sk-child sk-bounce2"></div>
               <div class="sk-child sk-bounce3"></div>
          </div>
     </div>

     <div id="main-wrapper">

          <%- include('./partials/__top-bar') %>

          <%- include ('./partials/__student-side-bar') %>

          <div class="content-body">

               <div class="container-fluid">
                    <div class="row page-titles mx-0">
                         <div class="col-sm-6 p-md-0">
                              <div class="welcome-text">
                                   <h4>Request</h4>
                              </div>
                         </div>

                         <!-- <div class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex">
                              <ol class="breadcrumb">
                                   <li class="breadcrumb-item"><a href="index">Home</a></li>
                                   <li class="breadcrumb-item active"><a href="javascript:void(0);">Holiday</a></li>
                                   <li class="breadcrumb-item active"><a href="javascript:void(0);">All Holiday</a></li>
                              </ol>
                         </div> -->

                    </div>

                    <section title="odRequest">
                         <div id="editor" class="bg-white"></div>
                         <button id="submit" class="btn btn-primary mt-4">Submit</button>
                    </section>

                    <!-- <div class="row">
                         <div class="col-lg-12">
                              <div class="card">
                                   <div class="card-header">
                                        <h4 class="card-title">Holiday List</h4>
                                        <a href="add-holiday" class="btn btn-primary">+ Add New</a>
                                   </div>

                                   <div class="row " style="margin: 20px; ">
                                        <div class="col-md-12">
                                             <div class="card">
                                                  <div class="card-header">
                                                       Upload Proof
                                                  </div>
                                                  <div class="card-body">
                                                       <form action="/taskproof" method="post"
                                                            enctype="multipart/form-data">
                                                            <label for="taskproof" class="form-check-label">Choose the
                                                                 type of proof</label>
                                                            <div class="my-2">
                                                                 <select name="taskproof" id="taskproof">
                                                                      <%for(x in data){%>
                                                                           <option value="<%=x%>">
                                                                                <%= data[x].task_name%>
                                                                           </option>
                                                                           <%}%>
                                                                 </select>
                                                            </div>
                                                            <input type="file" name="image" class="form-control">
                                                            <button type="submit" class="btn btn-primary"
                                                                 style="margin-top: 10px;">Upload Extra-curricular
                                                                 Certificate</button>
                                                       </form>
                                                  </div>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div> -->

               </div>
          </div>
     </div>

     <script>
          var quill = new Quill('#editor', {
               theme: 'snow'
          });

          const student_id = '<%= student_id %>'

          const odSubmitBtn = document.getElementById("submit")
  
          odSubmitBtn.addEventListener("click",async()=>{
               odSubmitBtn.disabled = true
               await fetch("/od-request",{
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ letter: quill.root.innerHTML, student_id: student_id })
               })
               location.reload()
          })
          
      </script>

     <!-- Required vendors -->
     <script src="/vendor/global/global.min.js"></script>
     <script src="/vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
     <script src="/js/custom.min.js"></script>
     <script src="/js/dlabnav-init.js"></script>
     <!-- Datatable -->
     <script src="/vendor/datatables/js/jquery.dataTables.min.js"></script>
     <script src="/js/plugins-init/datatables.init.js"></script>

     <!-- Svganimation scripts -->
     <script src="/vendor/svganimation/vivus.min.js"></script>
     <script src="/vendor/svganimation/svg.animation.js"></script>
     <script src="/js/styleSwitcher.js"></script>
</body>

</html>